
# Fail on first non-zreo exit code
set -e

echo Copying files from ./devicefs/ to device root
for f in `ls -tF devicefs`; do
  echo "Putting: $f"; ampy put devicefs/$f $f;
done

mac_addr=`ampy run scripts/print_mac_address.py`
echo "Device MAC address is: $mac_addr"

echo Resetting the device
# The reset command fails with on timeout even though the reset occurs, so do
# an || true to ignore it.
ampy reset --hard > /dev/null 2>&1 || true
